/*!
 * QRCode.js v1.0.0
 * Copyright (c) 2012 davidshimjs
 * Licensed under the MIT License
 */
!function(r,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():r.QRCode=e()}(this,function(){"use strict";function r(r,e){if(this.typeNumber=r,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],null==r||r<1||r>40)throw new Error("Type number out of range:"+r);if(null==e||e<0||e>3)throw new Error("Error correct level out of range:"+e)}function e(r,e){this.totalCount=r,this.dataCount=e}function t(){this.buffer=[],this.length=0}function n(r){for(var e=0;r!=0;)e++,r>>>=1;return e}r.prototype={addData:function(r){var e=new i(o.MODE_8BIT_BYTE,r);this.dataList.push(e),this.dataCache=null},isDark:function(r,e){if(r<0||this.moduleCount<=r||e<0||this.moduleCount<=e)throw new Error(r+","+e);return this.modules[r][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustmentPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(r,e){for(var t=-1;t<=7;t++)if(!(r+t<=-1||this.moduleCount<=r+t))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[r+t][e+n]=0<=t&&t<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==t||6==t)||2<=t&&t<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var r=0,e=0,t=0;t<8;t++){this.makeImpl(!0,t);var n=a.getLostPoint(this);(0==t||r>n)&&(r=n,e=t)}return e},createMovieClip:function(r,e,t){var n=r.createEmptyMovieClip(e,t);this.make();for(var o=0;o<this.modules.length;o++)for(var i=1*o,u=0;u<this.modules[o].length;u++){var s=1*u;this.modules[o][u]&&(n.beginFill(0,100),n.moveTo(s,i),n.lineTo(s+1,i),n.lineTo(s+1,i+1),n.lineTo(s,i+1),n.endFill())}return n},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++)null==this.modules[r][6]&&(this.modules[r][6]=r%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustmentPattern:function(){for(var r=a.getPatternPosition(this.typeNumber),e=0;e<r.length;e++)for(var t=0;t<r.length;t++){var n=r[e],o=r[t];if(null==this.modules[n][o])for(var i=-2;i<=2;i++)for(var u=-2;u<=2;u++)this.modules[n+i][o+u]=i==-2||2==i||u==-2||2==u||0==i&&0==u}},setupTypeNumber:function(r){for(var e=a.getBCHTypeNumber(this.typeNumber),t=0;t<18;t++){var n=!r&&1==(e>>t&1);this.modules[Math.floor(t/3)][t%3+this.moduleCount-8-3]=n}for(t=0;t<18;t++){n=!r&&1==(e>>t&1);this.modules[t%3+this.moduleCount-8-3][Math.floor(t/3)]=n}},setupTypeInfo:function(r,e){for(var t=this.errorCorrectLevel<<3|e,n=a.getBCHTypeInfo(t),o=0;o<15;o++){var i=!r&&1==(n>>o&1);o<6?this.modules[o][8]=i:o<8?this.modules[o+1][8]=i:this.modules[this.moduleCount-15+o][8]=i}for(o=0;o<15;o++){i=!r&&1==(n>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=i:o<9?this.modules[8][15-o-1+1]=i:this.modules[8][15-o-1]=i}this.modules[this.moduleCount-8][8]=!r},mapData:function(r,e){for(var t=-1,n=this.moduleCount-1,o=7,i=0,u=this.moduleCount-1;u>0;u-=2)for(6==u&&u--;;){for(var s=0;s<2;s++)if(null==this.modules[n][u-s]){var l=!1;i<r.length&&(l=1==(r[i]>>>o&1)),a.getMask(e,n,u-s)&&(l=!l),this.modules[n][u-s]=l,o--,-1==o&&(i++,o=7)}if((n+=t)<0||this.moduleCount<=n){n-=t,t=-t;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(e,n,o){for(var i=t.getRSBlocks(e,n),u=new h,s=0;s<o.length;s++){var l=o[s];u.put(l.mode,4),u.put(l.getLength(),a.getLengthInBits(l.mode,e)),l.write(u)}var f=0;for(s=0;s<i.length;s++)f+=i[s].dataCount;if(u.getLengthInBits()>8*f)throw new Error("code length overflow. ("+u.getLengthInBits()+">"+8*f+")");for(u.getLengthInBits()+4<=8*f&&u.put(0,4);u.getLengthInBits()%8!=0;)u.putBit(!1);for(;!(u.getLengthInBits()>=8*f||(u.put(r.PAD0,8),u.getLengthInBits()>=8*f));)u.put(r.PAD1,8);return r.createBytes(u,i)},r.createBytes=function(r,t){for(var n=0,o=0,i=0,u=new Array(t.length),s=new Array(t.length),l=0;l<t.length;l++){var f=t[l].dataCount,h=t[l].totalCount-f;o=Math.max(o,f),i=Math.max(i,h),u[l]=new Array(f);for(var c=0;c<u[l].length;c++)u[l][c]=255&r.buffer[c+n];n+=f;var d=a.getErrorCorrectPolynomial(h),m=new g(u[l],d.getLength()-1).mod(d);s[l]=new Array(d.getLength()-1);for(c=0;c<s[l].length;c++){var v=c+m.getLength()-s[l].length;s[l][c]=v>=0?m.get(v):0}}var w=0;for(c=0;c<t.length;c++)w+=t[c].totalCount;var p=new Array(w),y=0;for(c=0;c<o;c++)for(l=0;l<t.length;l++)c<u[l].length&&(p[y++]=u[l][c]);for(c=0;c<i;c++)for(l=0;l<t.length;l++)c<s[l].length&&(p[y++]=s[l][c]);return p};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i=function(r,e){this.mode=r,this.data=e},u={},s=function(r,e){this.totalCount=r,this.dataCount=e},l=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],f=function(r,e){var t=r,n=s.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=n.length/3,i=[],u=0;u<o;u++)for(var l=n[3*u+0],f=n[3*u+1],h=n[3*u+2],c=0;c<l;c++)i.push(new s(f,h));return i},h=function(){var r=[],e=0,t={getBuffer:function(){return r},put:function(r,e){for(var t=0;t<e;t++)this.putBit(1==(r>>>e-t-1&1))},getLengthInBits:function(){return e},putBit:function(t){var n=Math.floor(e/8);r.length<=n&&r.push(0),t&&(r[n]|=128>>>e%8),e++}};return t},c=function(r){var e=o.MODE_8BIT_BYTE,t=r,n={getMode:function(){return e},getLength:function(r){return t.length},write:function(r){for(var e=0;e<t.length;e++)r.put(t.charCodeAt(e),8)}};return n},d=function(){var r=[],e={writeByte:function(e){r.push(255&e)},writeShort:function(r){e.writeByte(r),e.writeByte(r>>>8)},writeBytes:function(r,t,n){t=t||0,n=n||r.length;for(var o=0;o<n;o++)e.writeByte(r[o+t])},writeString:function(r){for(var t=0;t<r.length;t++)e.writeByte(r.charCodeAt(t))},toByteArray:function(){return r},toString:function(){var e="";e+="[";for(var t=0;t<r.length;t++)t>0&&(e+=","),e+=r[t];return e+="]"}};return e},m=function(){var r=0,e=0,t=0,n="",o={},i=function(r){n+=String.fromCharCode(a(63&r))},u=function(r){if(r<0);else{if(r<64)return i(r),void 0;if(r<16384)return i(192|r>>>6),i(r),void 0;if(r<2097152)return i(224|r>>>12),i(128|r>>>6&63),i(r),void 0;if(r<268435456)return i(240|r>>>18),i(128|r>>>12&63),i(128|r>>>6&63),i(r),void 0}},s=function(r){return u(r),n},l=function(){n=""},f=function(){return n};o.getLength=function(r){return n.length},o.write=function(r){for(l();e>0;)i(r<<e-6&63),r>>>=6,e-=6;for(;e<0;)i(t>>>-e&63),e+=6,t<<=6;0==e&&(t=0)},o.flush=function(){e>0&&i(t<<e-6&63)};var a=function(r){if(r>=0&&r<=25)return 65+r;if(r>=26&&r<=51)return 97+(r-26);if(r>=52&&r<=61)return 48+(r-52);if(62==r)return 43;if(63==r)return 47;throw new Error("n:"+r)};return o},v=function(r,e){var t=r,n=e,o=new Array(r*e),i={setPixel:function(r,e,n){o[e*t+r]=n},write:function(r){r.writeString("GIF89a"),r.writeShort(t),r.writeShort(n),r.writeByte(240),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(255),r.writeByte(255),r.writeByte(255),r.writeByte(44),r.writeShort(0),r.writeShort(0),r.writeShort(t),r.writeShort(n),r.writeByte(0);var e=2,o=u(e);r.writeByte(e);for(var i=0;o.length-i>255;)r.writeByte(255),r.writeBytes(o,i,255),i+=255;r.writeByte(o.length-i),r.writeBytes(o,i,o.length-i),r.writeByte(0),r.writeByte(59)}},u=function(r){for(var e=1<<r,t=1+(1<<r),n=r+1,i=s(),u=0;u<e;u++)i.add(String.fromCharCode(u));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(t));var l=d(),f=o[0];l.writeByte(f);for(var h=1;h<o.length;h++){var c=o[h];if(null!=i.get(f+String.fromCharCode(c)))f+=String.fromCharCode(c);else{l.write(i.indexOf(f),n),i.size()<4095&&(i.size()==1<<n&&n++,i.add(f+String.fromCharCode(c))),f=String.fromCharCode(c)}}return l.write(i.indexOf(f),n),l.write(t,n),l.flush(),l.toByteArray()},s=function(){var r={},e=0,t={add:function(n){if(t.contains(n))throw new Error("dup key:"+n);r[n]=e,e++},size:function(){return e},indexOf:function(e){return r[e]},contains:function(e){return void 0!==r[e]},get:function(e){return r[e]}};return t},l=function(){var r=0,e=0,t={write:function(t,n){if(t>>>n!=0)throw new Error("length over");for(;r+n>=8;)e.writeByte(255&(t<<r|e)),n-=8-r,t>>>=8-r,r=0;r+=n,t<<=r},flush:function(){r>0&&e.writeByte(t<<8-r)}},n=d();return t={writeByte:function(r){n.writeByte(r)},writeShort:function(r){n.writeShort(r)},writeBytes:function(r,e,t){for(var o=0;o<t;o++)n.writeByte(r[o+e])},writeString:function(r){n.writeString(r)},toByteArray:function(){return n.toByteArray()}},e=t,t}(),f=d();return i},w=function(r,e,t,n){for(var o=v(r,e),i=0;i<e;i++)for(var u=0;u<r;u++)o.setPixel(u,i,t(u,i));var s=d();o.write(s);for(var l=m(),f=s.toByteArray(),h=0;h<f.length;h++)l.write(f[h],8);l.flush();var c="data:image/gif;base64,";return c+=function(r){for(var e=d(),t=r.length,n=0;n<t;n+=3){var o=(255&r[n])<<16|(255&r[n+1])<<8|255&r[n+2],i=n+3<t,u=n+2<t,s=n+1<t,l="=";if(s&&(l=p.charAt(63&o)),u&&(l=p.charAt(o>>>6&63)+l),i&&(l=p.charAt(o>>>12&63)+l),l=p.charAt(o>>>18&63)+l,e.writeString(l),t-n<3)break}return e.toString()}(l.getLength()<1?[]:l.toByteArray())},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=function(r,e,t,n,o,i){r.isDark(t,n)&&o.lineTo(i*n+r.getModuleCount()/2,i*t+r.getModuleCount()/2)},g=function(r,e){this.num=r,this.den=e},M=function(){var r=1,e=0,t=function(){return r},n=function(){return e},o=function(t){for(var n=0;1!=t;)n++,t>>>=1;return n};return{glog:function(e){if(e<1)throw new Error("glog("+e+")");return o(e)},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return r[e]},EXP_TABLE:t,LOG_TABLE:n}},b=function(){for(var r=new Array(256),e=new Array(256),t=0;t<8;t++)r[t]=1<<t;for(t=8;t<256;t++)r[t]=r[t-4]^r[t-5]^r[t-6]^r[t-8];for(t=0;t<255;t++)e[r[t]]=t;var n={};return n.glog=function(r){if(r<1)throw new Error("glog("+r+")");return e[r]},n.gexp=function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return r[e]},n}(),B=function(r,e){if(void 0==r.length)throw new Error(r.length+"/"+e);var t=function(){for(var t=0;t<r.length&&0==r[t];)t++;for(var n=new Array(r.length-t+e),o=0;o<r.length-t;o++)n[o]=r[o+t];return n}(),n={};return n.getAt=function(r){return t[r]},n.getLength=function(){return t.length},n.multiply=function(r){for(var e=new Array(n.getLength()+r.getLength()-1),t=0;t<n.getLength();t++)for(var o=0;o<r.getLength();o++)e[t+o]^=b.gexp(b.glog(n.getAt(t))+b.glog(r.getAt(o)));return B(e,0)},n.mod=function(r){if(n.getLength()-r.getLength()<0)return n;for(var e=b.glog(n.getAt(0))-b.glog(r.getAt(0)),t=new Array(n.getLength()),o=0;o<n.getLength();o++)t[o]=n.getAt(o);for(o=0;o<r.getLength();o++)t[o]^=b.gexp(b.glog(r.getAt(o))+e);return B(t,0).mod(r)},n},a=function(){var r=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e=1335,i=7973,l=21522,h={},c=function(r){for(var e=0;0!=r;)e++,r>>>=1;return e};h.getBCHTypeInfo=function(r){for(var t=r<<10;c(t)-c(e)>=0;)t^=e<<c(t)-c(e);return(r<<10|t)^l},h.getBCHTypeNumber=function(r){for(var e=r<<12;c(e)-c(i)>=0;)e^=i<<c(e)-c(i);return r<<12|e},h.getPatternPosition=function(e){return r[e-1]},h.getMask=function(r,e,t){switch(r){case 0:return(e+t)%2==0;case 1:return e%2==0;case 2:return t%3==0;case 3:return(e+t)%3==0;case 4:return(Math.floor(e/2)+Math.floor(t/3))%2==0;case 5:return e*t%2+e*t%3==0;case 6:return(e*t%2+e*t%3)%2==0;case 7:return(e*t%3+(e+t)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}},h.getErrorCorrectPolynomial=function(r){for(var e=B([1],0),t=0;t<r;t++)e=e.multiply(B([1,b.gexp(t)],0));return e},h.getLengthInBits=function(r,e){if(1<=e&&e<10)switch(r){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:case o.MODE_KANJI:return 8;default:throw new Error("mode:"+r)}else if(e<27)switch(r){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+r)}else{if(!(e<41))throw new Error("type:"+e);switch(r){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+r)}}},h.getLostPoint=function(r){for(var e=r.getModuleCount(),t=0,n=0;n<e;n++)for(var o=0;o<e;o++){for(var i=0,u=r.isDark(n,o),s=-1;s<=1;s++)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l++)o+l<0||e<=o+l||0==s&&0==l||u==r.isDark(n+s,o+l)&&i++;i>5&&(t+=3+i-5)}for(n=0;n<e-1;n++)for(o=0;o<e-1;o++){var f=0;r.isDark(n,o)&&f++,r.isDark(n+1,o)&&f++,r.isDark(n,o+1)&&f++,r.isDark(n+1,o+1)&&f++,0!=f&&4!=f||(t+=3)}for(n=0;n<e;n++)for(o=0;o<e-6;o++)r.isDark(n,o)&&!r.isDark(n,o+1)&&r.isDark(n,o+2)&&r.isDark(n,o+3)&&r.isDark(n,o+4)&&!r.isDark(n,o+5)&&r.isDark(n,o+6)&&(t+=40);for(o=0;o<e;o++)for(n=0;n<e-6;n++)r.isDark(n,o)&&!r.isDark(n+1,o)&&r.isDark(n+2,o)&&r.isDark(n+3,o)&&r.isDark(n+4,o)&&!r.isDark(n+5,o)&&r.isDark(n+6,o)&&(t+=40);var h=0;for(o=0;o<e;o++)for(n=0;n<e;n++)r.isDark(n,o)&&h++;return t+=10*Math.abs(Math.floor(100*h/e/e)-50)/5},h}();g.prototype={get:function(r){return this.num[r]},getLength:function(){return this.num.length},multiply:function(r){for(var e=new Array(this.getLength()+r.getLength()-1),t=0;t<this.getLength();t++)for(var n=0;n<r.getLength();n++)e[t+n]^=M.gexp(M.glog(this.get(t))+M.glog(r.get(n)));return new g(e,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var e=M.glog(this.get(0))-M.glog(r.get(0)),t=new Array(this.getLength()),n=0;n<this.getLength();n++)t[n]=this.get(n);for(n=0;n<r.getLength();n++)t[n]^=M.gexp(M.glog(r.get(n))+e);return new g(t,0).mod(r)}},i.prototype={getMode:function(){return this.mode},getLength:function(r){return this.data.length},write:function(r){for(var e=0;e<this.data.length;e++)r.put(this.data.charCodeAt(e),8)}},t.prototype={getLengthInBits:function(){return this.length},put:function(r,e){for(var t=0;t<e;t++)this.putBit(1==(r>>>e-t-1&1))},putBit:function(r){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var k="undefined"!=typeof CanvasRenderingContext2D,E={toSJIS:function(){return unescape(encodeURIComponent(this)).replace(/[!-~]/g,function(r){return String.fromCharCode(r.charCodeAt(0)+65248)}).replace(/\u3000/g,String.fromCharCode(12288))}};String.prototype.qrSJIS||(String.prototype.qrSJIS=E.toSJIS);var I=function(e,n,i,l){var f={};return f.options=l={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"",radius:.5,quiet:0}||{},l.fill&&l.color&&(l.fill=l.color),n="string"==typeof n?document.getElementById(n):n,f.canvas="canvas"===l.render?n:function(){var r=document.createElement("canvas");return r.width=l.size,r.height=l.size,r}(),f.toCanvas=function(){for(var n=l.size,o=l.quiet||0,i=Math.floor((n-2*o)/e.getModuleCount()),u=Math.floor((n-2*o-i*e.getModuleCount())/2),s=f.canvas,h=s.getContext("2d"),c=(h.lineWidth=1,l.background&&(h.fillStyle=l.background,h.fillRect(0,0,n,n)),l.fill),d=0;d<e.getModuleCount();d++)for(var m=0;m<e.getModuleCount();m++){var v=m*i+u,w=d*i+u;if(h.fillStyle=e.isDark(d,m)?c:"rgba(255,255,255,0.5)",l.radius>0&&l.radius<=.5){var p=l.radius*i,y=v+p,g=w+p,M=i-2*p;if(e.isDark(d,m)){if(h.beginPath(),h.moveTo(v,y),h.arcTo(v,w,y,w,p),h.arcTo(v+i,w,v+i,g,p),h.arcTo(v+i,w+i,g,w+i,p),h.arcTo(v,w+i,v,g,p),h.closePath(),h.fill(),M>0){var b=3*p;h.beginPath(),h.rect(y,g,M,M),h.fillStyle="rgba(255,255,255,0.4)",l.background||(h.fillStyle="rgba(0,0,0,0.1)"),h.fill()}}}else h.rect(v,w,i,i),h.fill()}},f.toDataURL=function(){var r=f.canvas;f.toCanvas();var e=r.toDataURL();return e},"svg"===l.render&&(f.toSVG=function(){for(var n=l.size,o=l.quiet||0,i=Math.floor((n-2*o)/e.getModuleCount()),u=Math.floor((n-2*o-i*e.getModuleCount())/2),s=l.fill,h="",c=0;c<e.getModuleCount();c++)for(var d=0;d<e.getModuleCount();d++){var m=d*i+u,v=c*i+u;e.isDark(c,d)&&(h+="<rect x='"+m+"' y='"+v+"' width='"+i+"' height='"+i+"' fill='"+s+"' shape-rendering='crispEdges'/>")}var w="<svg version='1.1' xmlns='http://www.w3.org/2000/svg' ";w+=" width='"+n+"' height='"+n+"' viewBox='0 0 "+n+" "+n+"' ";var p=l.background;return w+=p?" style='background-color:"+p+";'>":">",w+=h,w+="</svg>"}),f};return function(t,n){var o=u[n];if("undefined"==typeof o)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+n);o||(o=u[n]=f(t,n));var i=o.length/3,s=[];for(var l=0;l<i;l++)for(var h=o[3*l+0],a=o[3*l+1],c=o[3*l+2],d=0;d<h;d++)s.push(new e(a,c));return s},function(e,t){return"undefined"!=typeof t&&(e=c(e)),function(e,t,n){for(var o=r(t,n),i=0;i<e.length;i++){var u=e[i];o.addData(u.data)}o.make();var s=o.getModuleCount(),l=o.getModuleCount(),f=0,h=0;return l&&(f=Math.floor(100/l),h=Math.floor((100-f*l)/2),f++),{text:e,level:n,version:t,get:function(r,e){return r-=h,e-=h,0<=r&&r<f*s&&0<=e&&e<f*l&&o.isDark(Math.floor(e/f),Math.floor(r/f))},size:100,getModuleCount:function(){return 100},isDark:function(r,e){return this.get(r,e)},addBlank:function(r,e,t,n){return this}}}(e,function(){for(var r=1;r<40;r++){for(var t=s.getRsBlockTable(r,n),o=0,i=0;i<t.length;i+=3)o+=t[i];for(var u=0,l=0;l<e.length;l++){var f=e[l];u+=4,u+=a.getLengthInBits(f.mode,r),u+=f.getLength()}if(u<=8*o)break}return r}(),n),k&&(function(){try{return document.createElement("canvas").getContext("2d"),!0}catch(r){return!1}}()&&(HTMLCanvasElement.prototype.toQRCode=function(r,e){return I(r(this.width,this.height),this,null,e)}),"function"==typeof define&&define.amd?define(function(){return I}):I)},s.getRsBlockTable=function(r,e){switch(e){case u.L:return l[4*(r-1)+0];case u.M:return l[4*(r-1)+1];case u.Q:return l[4*(r-1)+2];case u.H:return l[4*(r-1)+3];default:return}}}});

// 简单的QR码生成器包装器
class QRCodeGenerator {
    constructor(element, options = {}) {
        this.element = element;
        this.qr = new QRCode(element, {
            width: options.width || 256,
            height: options.height || 256,
            colorDark: options.colorDark || "#000000",
            colorLight: options.colorLight || "#ffffff",
            correctLevel: QRCode.CorrectLevel.M
        });
    }
    
    makeCode(text) {
        this.qr.makeCode(text);
    }
    
    clear() {
        this.qr.clear();
    }
}

// 全局导出
window.QRCodeGenerator = QRCodeGenerator;
window.QRCode = QRCode;
